# KOSA Backend Environment Variables

# 서버 설정
PORT=3001
HOST=0.0.0.0
NODE_ENV=development
BACKEND_URL=http://localhost:3001

# 분석 서버 설정
ANALYSIS_SERVER_URL=http://localhost:5000
ANALYSIS_SERVER_TOKEN=your-analysis-server-bearer-token

# HTTP 클라이언트 설정
HTTP_TIMEOUT=120000
HTTP_RETRY_COUNT=3

# Circuit Breaker 설정
CIRCUIT_BREAKER_TIMEOUT=120000
CIRCUIT_BREAKER_ERROR_THRESHOLD=50
CIRCUIT_BREAKER_RESET_TIMEOUT=60000

# Sentry 설정
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# CORS 설정 (production only)
ALLOWED_ORIGINS=http://localhost:3000,https://yourdomain.com

# Kafka 설정
KAFKA_BROKERS=localhost:9092,localhost:9093
KAFKA_CLIENT_ID=kosa-backend
KAFKA_GROUP_ID=kosa-backend-group

# Kafka SSL 설정 (프로덕션 환경)
KAFKA_SSL_ENABLED=false
KAFKA_SSL_REJECT_UNAUTHORIZED=false

# Kafka SASL 인증 설정 (프로덕션 환경)
KAFKA_SASL_ENABLED=false
KAFKA_SASL_MECHANISM=plain
KAFKA_SASL_USERNAME=your-kafka-username
KAFKA_SASL_PASSWORD=your-kafka-password

# Redis 설정 (캐싱용)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# 데이터베이스 설정 (PostgreSQL)
DB_HOST=localhost
DB_USER=postgres
DB_PASSWORD=password
DB_NAME=highpipe
DB_PORT=5432
DB_POOL_MAX=20
DB_IDLE_TIMEOUT=30000
DB_CONNECTION_TIMEOUT=2000

# Prisma Database URL
DATABASE_URL="postgresql://postgres:password@localhost:5432/highpipe?schema=public"

# MongoDB 설정 (NoSQL - 실시간 감정 카드용)
MONGODB_URL="mongodb://localhost:27017/highpipe"
MONGODB_DB_NAME=highpipe

# JWT 설정
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_EXPIRES_IN=15m
JWT_REFRESH_SECRET=your-super-secret-refresh-key-change-this-in-production
JWT_REFRESH_EXPIRES_IN=7d

# 로깅 설정 (선택사항)
LOG_LEVEL=info
LOG_FILE=logs/kosa-backend.log

# 외부 서비스 설정 (선택사항)
CRAWLING_SERVER_URL=http://localhost:8001

# Airflow API 설정
AIRFLOW_API_URL=http://localhost:8080/api/v1
AIRFLOW_USERNAME=admin
AIRFLOW_PASSWORD=admin
AIRFLOW_TIMEOUT=120000
AIRFLOW_RETRY_COUNT=3

# Airflow Circuit Breaker 설정
AIRFLOW_CIRCUIT_BREAKER_TIMEOUT=120000
AIRFLOW_CIRCUIT_BREAKER_ERROR_THRESHOLD=50
AIRFLOW_CIRCUIT_BREAKER_RESET_TIMEOUT=60000